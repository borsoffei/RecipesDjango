{% extends "base_generic.html" %}

{% block content %}
    <h1>Create Recipe</h1>

    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}

        <input id="ingredientSearch" type="text" placeholder="Search ingredients...">
        <div id="ingredientsList">
            {% for ingredient in ingredients %}
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="ingredients" value="{{ ingredient.id }}"
                           id="ingredient{{ ingredient.id }}">
                    <label class="form-check-label" for="ingredient{{ ingredient.id }}">
                        {{ ingredient.name }}
                    </label>
                </div>
            {% endfor %}
        </div>

        <button type="submit">Publish</button>
    </form>

    <script>
        $(document).ready(function () {
            $("#ingredientSearch").on("keyup", function () {
                var value = $(this).val().toLowerCase();
                $("#ingredientsList label").filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
            });
        });
    </script>
{% endblock %}